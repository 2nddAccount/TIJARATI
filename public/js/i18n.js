const Translations = {
    darija: {
        appName: "تجارتي برو",
        home: "الرئيسية",
        history: "السجل",
        credit: "الكريدي",
        partners: "الشركاء",
        settings: "الإعدادات",
        income: "فلوس دخلو",
        expenses: "فلوس خرجو",
        netProfit: "الربح الصافي",
        quickActions: "عمليات سريعة",
        newSale: "بعت سلعة",
        newPurchase: "شريت سلعة",
        pendingDebts: "فلوسك عند الناس",
        recentActivity: "آخر المعاملات ديالك",
        seeAll: "شوف الكل",
        transactions: "جميع العمليات",
        all: "الكل",
        sales: "بيع",
        purchases: "شرا",
        credits: "كريدي",
        creditBook: "دفتر الكريدي",
        peopleOweYou: "الناس كيتسالوك",
        stock: "السلعة (Stock)",
        addPartner: "زيد شريك",
        language: "اللغة",
        currency: "العملة",
        exportData: "حفظ نسخة",
        clearData: "مسح كلشي",
        save: "سجل العملية",
        itemName: "شنو هاد السلعة؟",
        price: "الثمن",
        quantity: "شحال (العدد)",
        paymentStatus: "واش تخلصتي؟",
        clientName: "شكون؟ (السمية)",
        amountPaid: "شحال عطى دابا؟",
        date: "التاريخ",
        areYouSure: "متأكد باغي تمسح؟",
        deleteWarning: "غادي يمشي كلشي!",
        cancel: "لا، رجع",
        yesDelete: "امسح",
        today: "اليوم"
    },
    arabic: {
        appName: "تجارتي برو",
        home: "الرئيسية",
        history: "السجل",
        credit: "الديون",
        partners: "الشركاء",
        settings: "الإعدادات",
        income: "الإيرادات",
        expenses: "المصروفات",
        netProfit: "صافي الربح",
        quickActions: "إجراءات سريعة",
        newSale: "بيع جديد",
        newPurchase: "شراء جديد",
        pendingDebts: "ديون معلقة",
        recentActivity: "النشاط الأخير",
        seeAll: "عرض الكل",
        transactions: "المعاملات",
        all: "الكل",
        sales: "مبيعات",
        purchases: "مشتريات",
        credits: "ديون",
        creditBook: "دفتر الديون",
        peopleOweYou: "لك عند الناس",
        stock: "المخزون",
        addPartner: "إضافة شريك",
        language: "اللغة",
        currency: "العملة",
        exportData: "تصدير البيانات",
        clearData: "مسح البيانات",
        save: "حفظ",
        itemName: "اسم الصنف",
        price: "السعر",
        quantity: "الكمية",
        paymentStatus: "حالة الدفع",
        clientName: "اسم العميل",
        amountPaid: "المبلغ المدفوع",
        date: "التاريخ",
        areYouSure: "هل أنت متأكد؟",
        deleteWarning: "سيتم حذف جميع البيانات",
        cancel: "إلغاء",
        yesDelete: "حذف",
        today: "اليوم"
    },
    french: {
        appName: "Tijarati",
        home: "Accueil",
        history: "Historique",
        credit: "Crédits",
        partners: "Partenaires",
        settings: "Paramètres",
        income: "Entrées",
        expenses: "Sorties",
        netProfit: "Bénéfice Net",
        quickActions: "Actions Rapides",
        newSale: "Nouvelle Vente",
        newPurchase: "Nouvel Achat",
        pendingDebts: "Crédits en cours",
        recentActivity: "Activité Récente",
        seeAll: "Voir tout",
        transactions: "Transactions",
        all: "Tout",
        sales: "Ventes",
        purchases: "Achats",
        credits: "Crédits",
        creditBook: "Carnet de Crédit",
        peopleOweYou: "On vous doit",
        stock: "Stock",
        addPartner: "Ajouter Partenaire",
        language: "Langue",
        currency: "Devise",
        exportData: "Exporter",
        clearData: "Tout effacer",
        save: "Enregistrer",
        itemName: "Article",
        price: "Prix",
        quantity: "Quantité",
        paymentStatus: "Statut de paiement",
        clientName: "Nom du client",
        amountPaid: "Montant payé",
        date: "Date",
        areYouSure: "Êtes-vous sûr ?",
        deleteWarning: "Toutes les données seront supprimées",
        cancel: "Annuler",
        yesDelete: "Supprimer",
        today: "Aujourd'hui"
    },
    english: {
        appName: "Tijarati",
        home: "Home",
        history: "History",
        credit: "Debts",
        partners: "Partners",
        settings: "Settings",
        income: "Income",
        expenses: "Expenses",
        netProfit: "Net Profit",
        quickActions: "Quick Actions",
        newSale: "New Sale",
        newPurchase: "New Purchase",
        pendingDebts: "Pending Debts",
        recentActivity: "Recent Activity",
        seeAll: "See All",
        transactions: "Transactions",
        all: "All",
        sales: "Sales",
        purchases: "Purchases",
        credits: "Debts",
        creditBook: "Debt Book",
        peopleOweYou: "People owe you",
        stock: "Inventory",
        addPartner: "Add Partner",
        language: "Language",
        currency: "Currency",
        exportData: "Export Data",
        clearData: "Clear Data",
        save: "Save",
        itemName: "Item Name",
        price: "Price",
        quantity: "Quantity",
        paymentStatus: "Payment Status",
        clientName: "Client Name",
        amountPaid: "Amount Paid",
        date: "Date",
        areYouSure: "Are you sure?",
        deleteWarning: "All data will be lost",
        cancel: "Cancel",
        yesDelete: "Delete",
        today: "Today"
    }
};

const I18n = {
    t: (key) => {
        const lang = State.get('language') || 'darija';
        return Translations[lang][key] || key;
    },
    apply: () => {
        const lang = State.get('language') || 'darija';
        const t = Translations[lang];
        const isRTL = ['darija', 'arabic'].includes(lang);

        document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
        document.documentElement.lang = isRTL ? 'ar' : 'en';

        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.dataset.i18n;
            if (t[key]) el.innerText = t[key];
        });

        // Highlight active lang btn
        document.querySelectorAll('.lang-btn').forEach(b => {
            b.classList.remove('border-teal-500', 'bg-teal-50', 'text-teal-700');
            if (b.dataset.lang === lang) b.classList.add('border-teal-500', 'bg-teal-50', 'text-teal-700');
        });
    }
};

window.I18n = I18n;
